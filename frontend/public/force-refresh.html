<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Force Refresh - Clear Cache</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 3rem;
            max-width: 600px;
            width: 100%;
        }
        
        h1 {
            color: #1e293b;
            font-size: 2rem;
            margin-bottom: 1rem;
            text-align: center;
        }
        
        .warning {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }
        
        .success {
            background: #d1fae5;
            border-left: 4px solid #10b981;
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }
        
        .btn {
            width: 100%;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 0.5rem 0;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #f59e0b;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #d97706;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
        }
        
        .steps {
            background: #f8fafc;
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
        }
        
        .step {
            display: flex;
            align-items: start;
            margin: 1rem 0;
            gap: 1rem;
        }
        
        .step-number {
            background: #667eea;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .step-text {
            flex: 1;
            color: #334155;
        }
        
        code {
            background: #1e293b;
            color: #10b981;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }
        
        #status {
            text-align: center;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-weight: 600;
            display: none;
        }
        
        .status-clearing {
            background: #fef3c7;
            color: #92400e;
        }
        
        .status-success {
            background: #d1fae5;
            color: #065f46;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÑ Force Refresh Required</h1>
        
        <div class="warning">
            <strong>‚ö†Ô∏è Browser Cache Issue</strong><br>
            Your browser is showing an old cached version of the dashboard. The code has been updated but your browser hasn't reloaded it yet.
        </div>

        <div id="status"></div>

        <h3 style="margin: 1.5rem 0 1rem; color: #1e293b;">Quick Fix Options:</h3>

        <button class="btn btn-primary" onclick="clearAndReload()">
            üßπ Clear All & Hard Reload
        </button>

        <button class="btn btn-secondary" onclick="openIncognito()">
            üïµÔ∏è Open in Incognito Mode
        </button>

        <button class="btn btn-success" onclick="forceReload()">
            ‚ö° Force Hard Refresh (Ctrl+Shift+R)
        </button>

        <div class="steps">
            <h3 style="margin-bottom: 1rem; color: #1e293b;">Manual Steps (F12 Method):</h3>
            
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-text">Press <code>F12</code> to open Developer Tools</div>
            </div>
            
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-text">Click the <strong>Application</strong> tab (Chrome/Edge) or <strong>Storage</strong> tab (Firefox)</div>
            </div>
            
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-text">Expand <strong>Local Storage</strong> in the left sidebar</div>
            </div>
            
            <div class="step">
                <div class="step-number">4</div>
                <div class="step-text">Click on <code>http://localhost:5175</code></div>
            </div>
            
            <div class="step">
                <div class="step-number">5</div>
                <div class="step-text">Right-click any item ‚Üí <strong>Clear</strong> or <strong>Delete All</strong></div>
            </div>
            
            <div class="step">
                <div class="step-number">6</div>
                <div class="step-text">Go to <strong>Cache Storage</strong> in left sidebar ‚Üí Right-click ‚Üí <strong>Delete</strong></div>
            </div>
            
            <div class="step">
                <div class="step-number">7</div>
                <div class="step-text">Close DevTools and press <code>Ctrl + Shift + R</code> to hard refresh</div>
            </div>
        </div>

        <div class="success">
            <strong>‚úÖ What You Should See After Refresh:</strong><br><br>
            ‚Ä¢ <strong>Left Sidebar</strong>: CopFriendly logo, user profile, navigation menu, logout button<br>
            ‚Ä¢ <strong>Main Area</strong>: Clean page title "Traffic Sergeant Dashboard" (just text, no blue bar)<br>
            ‚Ä¢ <strong>Below</strong>: Dashboard cards and content<br>
            ‚Ä¢ <strong>NO</strong> duplicate navigation bars or headers!
        </div>

        <div style="text-align: center; margin-top: 2rem;">
            <button class="btn btn-primary" onclick="window.location.href='/'">
                üè† Go to Home / Login
            </button>
        </div>
    </div>

    <script>
        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = type;
            status.style.display = 'block';
        }

        function clearAndReload() {
            showStatus('üßπ Clearing cache...', 'status-clearing');
            
            // Clear localStorage
            localStorage.clear();
            
            // Clear sessionStorage
            sessionStorage.clear();
            
            // Show success
            showStatus('‚úÖ Cache cleared! Reloading...', 'status-success');
            
            // Force hard reload after a brief delay
            setTimeout(() => {
                window.location.reload(true);
            }, 1000);
        }

        function forceReload() {
            showStatus('‚ö° Force reloading...', 'status-clearing');
            
            // Clear storage first
            localStorage.clear();
            sessionStorage.clear();
            
            // Use cache-busting reload
            setTimeout(() => {
                window.location.href = window.location.href + '?nocache=' + Date.now();
            }, 500);
        }

        function openIncognito() {
            alert('Opening in Incognito:\n\n1. Press Ctrl+Shift+N (Chrome/Edge) or Ctrl+Shift+P (Firefox)\n2. Navigate to: http://localhost:5175\n3. You\'ll see the fresh version without any cache!');
        }

        // Check if we have cached data
        window.addEventListener('DOMContentLoaded', () => {
            const hasToken = localStorage.getItem('token');
            const hasUser = localStorage.getItem('user');
            
            if (hasToken || hasUser) {
                const warning = document.createElement('div');
                warning.className = 'warning';
                warning.style.marginTop = '1rem';
                warning.innerHTML = '<strong>üîç Cached Data Detected:</strong><br>Found old authentication data in your browser. This is why you\'re seeing the old version!';
                document.querySelector('.container').insertBefore(warning, document.getElementById('status'));
            }
        });
    </script>
</body>
</html>
